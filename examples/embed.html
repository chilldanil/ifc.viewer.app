<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>IFC Viewer UMD Example</title>
    <link rel="stylesheet" href="../dist/ifc-viewer.css" />
    <style>
      #host { width: 100vw; height: 100vh; }
    </style>
    <!-- React UMD globals required by the library's UMD build -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Minimal process shim for libraries that check NODE_ENV -->
    <script>window.process = { env: { NODE_ENV: 'production' } };</script>
  </head>
  <body>
    <div id="host"></div>
    <script src="../dist/ifc-viewer.umd.js"></script>
    <script>
      const host = document.getElementById('host');
      console.log('UMD global IFCViewer:', window.IFCViewer);
      const viewer = window.IFCViewer.createIFCViewer({
        container: host,
        theme: {
          '--bim-ui_color-base': '#1e2024',
        },
        onObjectSelected: (sel) => console.log('Selected:', sel),
        onModelLoaded: (m) => console.log('Model loaded:', m),
        onError: (e) => console.error('Viewer error:', e),
      });
      // Optional: load file via input
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = '.ifc';
      input.onchange = () => input.files?.[0] && viewer.loadModelFromFile(input.files[0]);
      input.style.position = 'absolute'; input.style.zIndex = 1; input.style.top = '10px'; input.style.left = '10px';
      host.appendChild(input);
    </script>
  </body>
  </html>
